"use strict";(self.webpackChunkposeidon_cli=self.webpackChunkposeidon_cli||[]).push([[72],{6737:(Y,d,p)=>{p.r(d),p.d(d,{DepenseModule:()=>R});var u=p(6895),s=p(433),m=p(9624),e=p(1571),b=p(2772),l=p(99),A=p(805),h=p(1383),g=p(1493),_=p(5593),f=p(585),Z=p(1740),T=p(3054),D=p(2210),v=p(5047);function w(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"h5",21),e._uU(2,"Enregistrer facture"),e.qZA(),e.TgZ(3,"span",22),e._UZ(4,"i",23),e.TgZ(5,"input",24),e.NdJ("keyup.enter",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.getByDate(o))}),e.qZA()()()}}function x(n,r){1&n&&(e.TgZ(0,"tr")(1,"th",25),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"ID "),e._UZ(5,"p-sortIcon",26),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Date op\xe9ration "),e._UZ(8,"p-sortIcon",26),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Numero facture "),e._UZ(11,"p-sortIcon",26),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Date facture "),e._UZ(14,"p-sortIcon",26),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Type "),e._UZ(17,"p-sortIcon",26),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Circuit "),e._UZ(20,"p-sortIcon",26),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Fournisseur "),e._UZ(23,"p-sortIcon",26),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Description "),e._UZ(26,"p-sortIcon",26),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Statu "),e._UZ(29,"p-sortIcon",26),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Saisisseur "),e._UZ(32,"p-sortIcon",26),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Montant hors taxe"),e._UZ(35,"p-sortIcon",26),e.qZA(),e.TgZ(36,"th"),e._uU(37,"TVA "),e._UZ(38,"p-sortIcon",26),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Montant TTC "),e._UZ(41,"p-sortIcon",26),e.qZA(),e._UZ(42,"th"),e.qZA())}function C(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openEdit(a))}),e.TgZ(1,"td",28),e._UZ(2,"p-tableCheckbox"),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA(),e.TgZ(5,"td",28),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td",28),e._uU(9),e.qZA(),e.TgZ(10,"td",28),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td",28),e._uU(14),e.qZA(),e.TgZ(15,"td",28),e._uU(16),e.qZA(),e.TgZ(17,"td",28),e._uU(18),e.qZA(),e.TgZ(19,"td",28),e._uU(20),e.qZA(),e.TgZ(21,"td",28),e._uU(22),e.qZA(),e.TgZ(23,"td",28),e._uU(24),e.qZA(),e.TgZ(25,"td",28),e._uU(26),e.qZA(),e.TgZ(27,"td",28),e._uU(28),e.qZA(),e.TgZ(29,"td",28),e._uU(30),e.qZA()()}if(2&n){const t=r.$implicit,i=e.oxw();e.ekj("selected",t===i.selectedRow),e.xp6(4),e.hij(" ",t.id_depense," "),e.xp6(2),e.hij(" ",e.xi3(7,16,t.date_operation,"yyyy-MM-dd")," "),e.xp6(3),e.hij(" ",t.numero_facture," "),e.xp6(2),e.hij(" ",e.xi3(12,19,t.date_facture,"yyyy-MM-dd")," "),e.xp6(3),e.hij(" ",t.type," "),e.xp6(2),e.hij(" ",t.circuit," "),e.xp6(2),e.hij(" ",t.fournisseur," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.hij(" ",t.statu," "),e.xp6(2),e.AsE(" ",t.admin.nom," ",t.admin.prenom," "),e.xp6(2),e.hij(" ",t.montant_HT," "),e.xp6(2),e.hij(" ",t.TVA," "),e.xp6(2),e.hij(" ",t.montant_HT+t.TVA," ")}}function U(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openDialog())}),e.qZA()()}}function N(n,r){1&n&&e._UZ(0,"p-fileUpload",31)(1,"button",32),2&n&&e.Q6J("maxFileSize",1e6)}function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"label",34),e._uU(2,"Date d'op\xe9ration"),e.qZA(),e._UZ(3,"p-calendar",35),e.qZA(),e.TgZ(4,"div",33)(5,"label",34),e._uU(6,"Date de la facture"),e.qZA(),e._UZ(7,"p-calendar",36),e.qZA(),e.TgZ(8,"div",37)(9,"div",38)(10,"label",39),e._uU(11,"Numero de la facture"),e.qZA(),e._UZ(12,"p-inputNumber",40),e.qZA()(),e.TgZ(13,"div",33)(14,"label",41),e._uU(15,"type"),e.qZA(),e._UZ(16,"input",42),e.qZA(),e.TgZ(17,"div",33)(18,"label",43),e._uU(19,"Circuit"),e.qZA(),e._UZ(20,"input",44),e.qZA(),e.TgZ(21,"div",33)(22,"label",43),e._uU(23,"fournisseur"),e.qZA(),e._UZ(24,"input",45),e.qZA(),e.TgZ(25,"div",33)(26,"label",46),e._uU(27,"description"),e.qZA(),e._UZ(28,"textarea",47),e.qZA(),e.TgZ(29,"div",33)(30,"label",48),e._uU(31,"Chemin"),e.qZA(),e.TgZ(32,"p-dropdown",49),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedStatu=o)}),e.qZA()(),e.TgZ(33,"div",37)(34,"div",38)(35,"label",39),e._uU(36,"Montant hors taxe"),e.qZA(),e._UZ(37,"p-inputNumber",50),e.qZA()(),e.TgZ(38,"div",37)(39,"div",38)(40,"label",39),e._uU(41,"TVA"),e.qZA(),e._UZ(42,"p-inputNumber",51),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(32),e.Q6J("options",t.status)("ngModel",t.selectedStatu)}}function q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(null==o.id?o.hideDialog():o.confirmDelete())}),e.qZA(),e.TgZ(2,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(null==o.id?o.postDepense():o.editDepense())}),e.qZA()}}function F(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteDialog=!1)}),e.qZA(),e.TgZ(1,"button",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete())}),e.qZA()}}const M=function(){return{width:"450px"}},I=[{path:"",component:(()=>{class n{constructor(t){this.depenseService=t,this.addNewD=!1,this.depenseForm=new s.cw({date_operation:new s.NI,date_facture:new s.NI,numero_facture:new s.NI,circuit:new s.NI(""),type:new s.NI(""),fournisseur:new s.NI(""),description:new s.NI(""),montant_HT:new s.NI,TVA:new s.NI,statu:new s.NI("")}),this.searchForm=new s.cw({search:new s.NI("")}),this.depense=[],this.newDepense={date_operation:null,date_facture:null,type:"",fournisseur:"",description:"",montant_HT:0,statu:"",admin:0,TVA:0,circuit:"",numero_facture:0},this.isEnable=!1,this.deleteDialog=!1,this.id=null,this.status=[{name:"banque"},{name:"caisse"},{name:"\xe0 definir"}],this.valueToSearch=[{value:"date facture"},{value:"date op\xe9ration"},{value:"circuit"}]}ngOnInit(){return this.readDepense()}readDepense(){this.depenseService.getDepense().subscribe(t=>{this.depense=t})}openDialog(){this.addNewD=!0,this.id=null,this.depenseForm.setValue({date_operation:null,date_facture:null,type:"",fournisseur:"",description:"",montant_HT:0,statu:"",TVA:0,circuit:"",numero_facture:0})}hideDialog(){this.addNewD=!1,this.isEnable=!1}postDepense(){this.id=null;let t=localStorage.getItem("admin"),i=JSON.parse(t);this.newDepense.date_operation=new Date(this.depenseForm.get("date_operation").value),this.newDepense.date_facture=new Date(this.depenseForm.get("date_facture").value),this.newDepense.numero_facture=Number(this.depenseForm.get("numero_facture").value),this.newDepense.type=this.depenseForm.get("type").value,this.newDepense.circuit=this.depenseForm.get("circuit").value,this.newDepense.fournisseur=this.depenseForm.get("fournisseur").value,this.newDepense.description=this.depenseForm.get("description").value,this.newDepense.montant_HT=Number(this.depenseForm.get("montant_HT").value),this.newDepense.TVA=Number(this.depenseForm.get("TVA").value),this.newDepense.statu=this.depenseForm.get("statu").value,this.newDepense.admin=Number(i.id),this.depenseService.postDepense(this.newDepense).subscribe(o=>{console.log(o),this.readDepense()}),this.addNewD=!1}onRowSelected(t){this.selectedRow=t,this.idToDelete=Number(this.selectedRow.id_depense),this.isEnable=!0}delete(){return this.depenseService.deleteDepense(this.idToDelete).subscribe(()=>{this.readDepense(),this.isEnable=!1,this.deleteDialog=!1,this.addNewD=!1})}confirmDelete(){console.log(this.id),this.deleteDialog=!0,this.isEnable=!1}getSearchValue(t){return t.target.value}getByDate(t){var i=this.getSearchValue(t);let o=this.searchForm.get("search").value;"date facture"==o?this.depenseService.searchFacture(i).subscribe(a=>{this.depense=a,console.log(this.depense)}):"date op\xe9ration"==o?this.depenseService.searchOperation(i).subscribe(a=>{this.depense=a,console.log("op\xe9ration")}):"circuit"==o&&this.depenseService.searchCircuit(i).subscribe(a=>{this.depense=a,console.log("circuit")})}openEdit(t){console.log("ity openEdit fa misokatra"),this.onRowSelected(t),this.addNewD=!0,this.selectedRow=t,this.id=this.selectedRow.id_depense,console.log(this.id);const i=new Date(this.selectedRow.date_operation),o=new Date(this.selectedRow.date_facture);this.depenseForm.setValue({date_operation:i,date_facture:o,description:this.selectedRow.description,fournisseur:this.selectedRow.fournisseur,montant_HT:this.selectedRow.montant_HT,statu:this.selectedRow.statu,type:this.selectedRow.type,TVA:this.selectedRow.TVA,circuit:this.selectedRow.circuit,numero_facture:this.selectedRow.numero_facture})}editDepense(){let t=localStorage.getItem("admin"),i=JSON.parse(t);return this.newDepense.date_facture=new Date(this.depenseForm.get("date_facture").value),this.newDepense.date_operation=new Date(this.depenseForm.get("date_operation").value),this.newDepense.numero_facture=Number(this.depenseForm.get("numero_facture").value),this.newDepense.circuit=this.depenseForm.get("circuit").value,this.newDepense.description=this.depenseForm.get("description").value,this.newDepense.fournisseur=this.depenseForm.get("fournisseur").value,this.newDepense.montant_HT=Number(this.depenseForm.get("montant_HT").value),this.newDepense.TVA=Number(this.depenseForm.get("TVA").value),this.newDepense.statu=this.depenseForm.get("statu").value,this.newDepense.type=this.depenseForm.get("type").value,this.newDepense.admin=Number(i.id),this.depenseService.updateDepense(this.id,this.newDepense).subscribe(o=>{this.addNewD=!1,this.readDepense(),this.isEnable=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-depense"]],decls:25,vars:11,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],[2,"display","flex","justify-content","flex-end",3,"formGroup"],["optionValue","value","optionLabel","value","formControlName","search",3,"options","ngModel","ngModelChange"],["selectionMode","single",3,"value"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],[3,"formGroup"],["header","Facture de d\xe9pense",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[3,"visible","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche...",1,"w-full","sm:w-auto",3,"keyup.enter"],[2,"width","3rem"],["field","code"],[3,"click"],[2,"width","14%","min-width","10rem"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help"],[1,"field"],["for",""],["type","string","inputId","icon","formControlName","date_operation","dateFormat","dd-mm-yy"],["type","string","inputId","icon","formControlName","date_facture","dateFormat","dd-mm-yy"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["formControlName","numero_facture","type","number"],["for","type"],["formControlName","type","type","text","pInputText","","id","type","required","","autofocus",""],["for","fournisseur"],["type","text","pInputText","","id","circuit","required","","autofocus","","formControlName","circuit"],["type","text","pInputText","","id","fournisseur","required","","autofocus","","formControlName","fournisseur"],["for","design"],["id","design","pInputTextarea","","required","","rows","3","cols","20","formControlName","description"],["for","status"],["optionValue","name","optionLabel","name","formControlName","statu",3,"options","ngModel","ngModelChange"],["formControlName","montant_HT","type","number"],["formControlName","TVA","type","number"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","label","Delete",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Depense"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"form",3)(6,"p-dropdown",4),e.NdJ("ngModelChange",function(a){return i.selectedValue=a}),e.qZA()(),e.TgZ(7,"p-table",5,6),e.YNc(9,w,6,0,"ng-template",7),e.YNc(10,x,43,0,"ng-template",8),e.YNc(11,C,31,22,"ng-template",9),e.qZA(),e.TgZ(12,"p-toolbar",10),e.YNc(13,U,2,0,"ng-template",11),e.YNc(14,N,2,1,"ng-template",12),e.qZA()()()(),e.TgZ(15,"form",13)(16,"p-dialog",14),e.NdJ("visibleChange",function(a){return i.addNewD=a}),e.YNc(17,y,43,2,"ng-template",15),e.YNc(18,q,3,0,"ng-template",16),e.qZA()(),e.TgZ(19,"p-dialog",17),e.NdJ("visibleChange",function(a){return i.deleteDialog=a}),e.TgZ(20,"div",18),e._UZ(21,"i",19),e.TgZ(22,"span"),e._uU(23,"Are you sure you want to delete selected products?"),e.qZA()(),e.YNc(24,F,2,0,"ng-template",16),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",i.searchForm),e.xp6(1),e.Q6J("options",i.valueToSearch)("ngModel",i.selectedValue),e.xp6(1),e.Q6J("value",i.depense),e.xp6(8),e.Q6J("formGroup",i.depenseForm),e.xp6(1),e.Akn(e.DdM(10,M)),e.Q6J("visible",i.addNewD)("modal",!0),e.xp6(3),e.Q6J("visible",i.deleteDialog))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,l.iA,A.jx,l.fz,l.UA,l.Mo,h.o,g.V,_.Hq,f.f,Z.o,T.g,D.Lt,v.Rn,u.uU],styles:[".selected[_ngcontent-%COMP%]{background-color:#080101}.dropdown[_ngcontent-%COMP%]{float:right}"]}),n})()}];let V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,m.Bz.forChild(I),m.Bz]}),n})();var S=p(529),J=p(1989);let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,s.u5,s.UX,V,l.U$,h.V,g.S,_.hJ,f._8,Z.j,T.A,D.kW,v.L$,S.JF,J.nD]}),n})()}}]);
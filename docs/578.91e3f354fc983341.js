"use strict";(self.webpackChunkposeidon_cli=self.webpackChunkposeidon_cli||[]).push([[578],{8578:(E,d,c)=>{c.r(d),c.d(d,{RecetteModule:()=>I});var p=c(6895),m=c(9624),a=c(433),e=c(1571),b=c(8019),s=c(99),w=c(805),_=c(1383),g=c(1493),h=c(5593),f=c(585),Z=c(1740),T=c(3054),R=c(2210),v=c(5047);function A(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"h5",21),e._uU(2,"Enregistrer facture"),e.qZA(),e.TgZ(3,"span",22),e._UZ(4,"i",23),e.TgZ(5,"input",24),e.NdJ("keyup.enter",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.getByDate(o))}),e.qZA()()()}}function x(n,r){1&n&&(e.TgZ(0,"tr")(1,"th",25),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"ID "),e._UZ(5,"p-sortIcon",26),e.qZA(),e.TgZ(6,"th",27),e._uU(7,"Date op\xe9ration"),e._UZ(8,"p-sortIcon",28),e.qZA(),e.TgZ(9,"th",27),e._uU(10,"Num\xe9ro facture"),e._UZ(11,"p-sortIcon",28),e.qZA(),e.TgZ(12,"th",27),e._uU(13,"Date facture"),e._UZ(14,"p-sortIcon",28),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Client "),e._UZ(17,"p-sortIcon",29),e.qZA(),e.TgZ(18,"th",30),e._uU(19,"Description "),e._UZ(20,"p-sortIcon",31),e.qZA(),e.TgZ(21,"th",32),e._uU(22,"Statu "),e._UZ(23,"p-sortIcon",33),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Admin "),e._UZ(26,"p-sortIcon",29),e.qZA(),e.TgZ(27,"th",34),e._uU(28,"Montant hors taxe "),e._UZ(29,"p-sortIcon",35),e.qZA(),e.TgZ(30,"th",34),e._uU(31,"TVA "),e._UZ(32,"p-sortIcon",35),e.qZA(),e.TgZ(33,"th",34),e._uU(34,"Total "),e._UZ(35,"p-sortIcon",35),e.qZA(),e._UZ(36,"th"),e.qZA())}function C(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.openEdit(l))}),e._UZ(1,"td",37),e.TgZ(2,"td",37),e._uU(3),e.qZA(),e.TgZ(4,"td",37),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td",37),e._uU(8),e.qZA(),e.TgZ(9,"td",37),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",37),e._uU(13),e.qZA(),e.TgZ(14,"td",37),e._uU(15),e.qZA(),e.TgZ(16,"td",37),e._uU(17),e.qZA(),e.TgZ(18,"td",37),e._uU(19),e.qZA(),e.TgZ(20,"td",37),e._uU(21),e.qZA(),e.TgZ(22,"td",37),e._uU(23),e.qZA(),e.TgZ(24,"td",37),e._uU(25),e.qZA()()}if(2&n){const t=r.$implicit,i=e.oxw();e.ekj("selected",t===i.selectedRow),e.xp6(3),e.hij(" ",t.id_recette," "),e.xp6(2),e.hij(" ",e.xi3(6,14,t.date_operation,"yyyy-MM-dd")," "),e.xp6(3),e.hij(" ",t.numero_facture," "),e.xp6(2),e.hij(" ",e.xi3(11,17,t.date_facture,"yyyy-MM-dd")," "),e.xp6(3),e.hij(" ",t.client," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.hij(" ",t.statu," "),e.xp6(2),e.AsE(" ",t.admin.nom," ",t.admin.prenom," "),e.xp6(2),e.hij(" ",t.montant_HT," "),e.xp6(2),e.hij(" ",t.TVA," "),e.xp6(2),e.hij(" ",t.montant_HT+t.TVA," ")}}function N(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openDialog())}),e.qZA()()}}function U(n,r){1&n&&e._UZ(0,"p-fileUpload",40)(1,"button",41),2&n&&e.Q6J("maxFileSize",1e6)}function q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",42)(1,"label",43),e._uU(2,"Date d'op\xe9ration bancaire"),e.qZA(),e._UZ(3,"p-calendar",44),e.qZA(),e.TgZ(4,"div",42)(5,"label",43),e._uU(6,"Date de la facture"),e.qZA(),e._UZ(7,"p-calendar",45),e.qZA(),e.TgZ(8,"div",46)(9,"div",47)(10,"label",48),e._uU(11,"Num\xe9ro facture"),e.qZA(),e._UZ(12,"p-inputNumber",49),e.qZA()(),e.TgZ(13,"div",42)(14,"label",50),e._uU(15,"client"),e.qZA(),e._UZ(16,"input",51),e.qZA(),e.TgZ(17,"div",42)(18,"label",52),e._uU(19,"Description"),e.qZA(),e._UZ(20,"textarea",53),e.qZA(),e.TgZ(21,"div",42)(22,"label",54),e._uU(23,"Statu"),e.qZA(),e.TgZ(24,"p-dropdown",55),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedStatu=o)}),e.qZA()(),e.TgZ(25,"div",46)(26,"div",47)(27,"label",48),e._uU(28,"Montant hors taxe"),e.qZA(),e._UZ(29,"p-inputNumber",56),e.qZA()(),e.TgZ(30,"div",46)(31,"div",47)(32,"label",48),e._uU(33,"TVA"),e.qZA(),e._UZ(34,"p-inputNumber",57),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(24),e.Q6J("options",t.status)("ngModel",t.selectedStatu)}}function S(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(null==o.id?o.hideDialog():o.confirmDelete())}),e.qZA(),e.TgZ(2,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(null==o.id?o.postRecette():o.editRecette())}),e.qZA()}}function F(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteDialog=!1)}),e.qZA(),e.TgZ(1,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete())}),e.qZA()}}const y=function(){return{width:"450px"}},V=[{path:"",component:(()=>{class n{constructor(t){this.recetteService=t,this.addNew=!1,this.recetteForm=new a.cw({date_operation:new a.NI,date_facture:new a.NI,client:new a.NI(""),description:new a.NI(""),statu:new a.NI(""),montant_HT:new a.NI,TVA:new a.NI,numero_facture:new a.NI}),this.recette=[],this.id=null,this.newRecette={date_operation:null,date_facture:null,client:"",description:"",montant_HT:0,statu:"",admin:null,TVA:0,numero_facture:0},this.searchForm=new a.cw({search:new a.NI("")}),this.isEnable=!1,this.deleteDialog=!1,this.status=[{name:"banque"},{name:"caisse"},{name:"\xe0 definir"}],this.valueToSearch=[{value:"date facture"},{value:"date op\xe9ration"}]}ngOnInit(){return console.log(this.recette),this.readRecette()}readRecette(){this.recetteService.getRecette().subscribe(t=>{this.recette=t})}postRecette(){let t=localStorage.getItem("admin"),i=JSON.parse(t);this.newRecette.date_facture=new Date(this.recetteForm.get("date_facture").value),this.newRecette.date_operation=new Date(this.recetteForm.get("date_operation").value),this.newRecette.client=this.recetteForm.get("client").value,this.newRecette.description=this.recetteForm.get("description").value,this.newRecette.montant_HT=Number(this.recetteForm.get("montant_HT").value),this.newRecette.TVA=Number(this.recetteForm.get("TVA").value),this.newRecette.statu=this.recetteForm.get("statu").value,this.newRecette.numero_facture=Number(this.recetteForm.get("numero_facture").value),this.newRecette.admin=Number(i.id),this.recetteService.postRecette(this.newRecette).subscribe(o=>{console.log(o),this.readRecette()}),this.readRecette(),this.addNew=!1,console.log("mande ny post")}openDialog(t){this.addNew=!0,this.recetteForm.setValue({date_operation:null,date_facture:null,client:"",description:"",montant_HT:0,statu:"",TVA:0,numero_facture:0})}hideDialog(){this.addNew=!1,this.isEnable=!1}getRecette(){console.log(this.recetteForm.value)}onSelectedRow(t){this.selectedRow=t,this.idToDelete=Number(this.selectedRow.id_recette),this.isEnable=!0,console.log(this.selectedRow)}delete(){return this.recetteService.deleteRecette(this.idToDelete).subscribe(()=>{this.readRecette(),this.isEnable=!1,this.deleteDialog=!1,this.addNew=!1})}confirmDelete(){this.deleteDialog=!0,this.isEnable=!1}getSearchValue(t){return t.target.value}getByDate(t){var i=this.getSearchValue(t);let o=this.searchForm.get("search").value;"date facture"==o?this.recetteService.getFacture(i).subscribe(l=>{this.recette=l,console.log("date facture")}):"date op\xe9ration"==o&&this.recetteService.getOperation(i).subscribe(l=>{this.recette=l,console.log("date operation")})}openEdit(t){this.addNew=!0,this.onSelectedRow(t),this.selectedRow=t,this.id=this.selectedRow.id_recette;const i=new Date(this.selectedRow.date_facture),o=new Date(this.selectedRow.date_operation);this.recetteForm.setValue({date_facture:i,date_operation:o,client:this.selectedRow.client,description:this.selectedRow.description,montant_HT:this.selectedRow.montant_HT,statu:this.selectedRow.statu,TVA:this.selectedRow.TVA,numero_facture:this.selectedRow.numero_facture})}editRecette(){let t=localStorage.getItem("admin"),i=JSON.parse(t);this.newRecette.date_facture=new Date(this.recetteForm.get("date_facture").value),this.newRecette.date_operation=new Date(this.recetteForm.get("date_operation").value),this.newRecette.client=this.recetteForm.get("client").value,this.newRecette.description=this.recetteForm.get("description").value,this.newRecette.montant_HT=Number(this.recetteForm.get("montant_HT").value),this.newRecette.TVA=Number(this.recetteForm.get("TVA").value),this.newRecette.statu=this.recetteForm.get("statu").value,this.newRecette.numero_facture=Number(this.recetteForm.get("numero_facture").value),this.newRecette.admin=Number(i.id),this.recetteService.updateRecette(this.id,this.newRecette).subscribe(o=>{console.log("lasa ilay update"),this.addNew=!1,this.readRecette()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-recette"]],decls:25,vars:11,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],[2,"display","flex","justify-content","flex-end",3,"formGroup"],["optionValue","value","optionLabel","value","formControlName","search",3,"options","ngModel","ngModelChange"],[3,"value"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],[3,"formGroup"],["header","Product Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[3,"visible","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","search","placeholder","Recherche...",1,"w-full","sm:w-auto",3,"keyup.enter"],[2,"width","3rem"],["field","code"],["pSortableColumn","name"],["field","name"],["field","price"],["pSortableColumn","category"],["field","category"],["pSortableColumn","inventoryStatus"],["field","inventoryStatus"],["pSortableColumn","rating"],["field","rating"],[3,"click"],[2,"width","14%","min-width","10rem"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help"],[1,"field"],["for",""],["formControlName","date_operation","inputId","icon"],["formControlName","date_facture","inputId","icon"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["formControlName","numero_facture"],["for","name"],["formControlName","client","type","text","pInputText","","id","name","required","","autofocus",""],["for","description"],["formControlName","description","id","description","pInputTextarea","","required","","rows","3","cols","20"],["for","status"],["optionLabel","name","optionValue","name","formControlName","statu",3,"options","ngModel","ngModelChange"],["formControlName","montant_HT"],["formControlName","TVA"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","label","Delete",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Recette"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"form",3)(6,"p-dropdown",4),e.NdJ("ngModelChange",function(l){return i.selectedValue=l}),e.qZA()(),e.TgZ(7,"p-table",5,6),e.YNc(9,A,6,0,"ng-template",7),e.YNc(10,x,37,0,"ng-template",8),e.YNc(11,C,26,20,"ng-template",9),e.qZA(),e.TgZ(12,"p-toolbar",10),e.YNc(13,N,2,0,"ng-template",11),e.YNc(14,U,2,1,"ng-template",12),e.qZA()()()(),e.TgZ(15,"form",13)(16,"p-dialog",14),e.NdJ("visibleChange",function(l){return i.addNew=l}),e.YNc(17,q,35,2,"ng-template",15),e.YNc(18,S,3,0,"ng-template",16),e.qZA()(),e.TgZ(19,"p-dialog",17),e.NdJ("visibleChange",function(l){return i.deleteDialog=l}),e.TgZ(20,"div",18),e._UZ(21,"i",19),e.TgZ(22,"span"),e._uU(23,"Voulez-vous vraiment supprimer cette facture?"),e.qZA()(),e.YNc(24,F,2,0,"ng-template",16),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",i.searchForm),e.xp6(1),e.Q6J("options",i.valueToSearch)("ngModel",i.selectedValue),e.xp6(1),e.Q6J("value",i.recette),e.xp6(8),e.Q6J("formGroup",i.recetteForm),e.xp6(1),e.Akn(e.DdM(10,y)),e.Q6J("visible",i.addNew)("modal",!0),e.xp6(3),e.Q6J("visible",i.deleteDialog))},dependencies:[s.iA,w.jx,s.lQ,s.fz,s.Mo,_.o,g.V,h.Hq,f.f,Z.o,T.g,R.Lt,v.Rn,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,p.uU],styles:[".selected[_ngcontent-%COMP%]{background-color:gray}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,m.Bz.forChild(V),m.Bz]}),n})();var D=c(529);let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,M,s.U$,_.V,g.S,h.hJ,f._8,Z.j,T.A,R.kW,v.L$,a.UX,a.u5,D.JF]}),n})()}}]);